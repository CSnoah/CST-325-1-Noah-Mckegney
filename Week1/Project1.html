<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body onload="init()" style="text-align: center;">

    <canvas id="gameCanvas" width="300" height="200" style="border:1px solid gray">

    </canvas>
    <br><br>
    <button id="colorBtn">Change Spawn Color</button>
    <br>
    <p id="frameCount">Frame Count: 0</p>
    <p id="rectangleCount">Rectangle Count: 0</p>
    <br><br>
    <script>
        var myCanvas = document.getElementById("gameCanvas");
        var sceneList = [];
        var currentFrameNumber = 0;
        const canvasWidth = myCanvas.width;
        const canvasHeight = myCanvas.height;

        function init() {
            console.log("Hello World!");

            const context = myCanvas.getContext("2d");



            const r1 = new Rectangle(10, 10, "red", 3);
            const r2 = new Rectangle(15, 15, "green", 3);

            sceneList.push(r1);
            sceneList.push(r2);

            updateAndDraw();
        }

        function updateAndDraw() {
            var randR = Math.random() * 255;
            var randG = Math.random() * 255;
            var randB = Math.random() * 255;
            var color = `rgb(${randR}, ${randG}, ${randB})`;
            sceneList.push(new Rectangle(
                Math.random() * canvasWidth,
                Math.random() * canvasHeight,
                color, 3
            ))

            for (let i = 0; i < sceneList.length; i++) {
                sceneList[i].draw();
            }

            currentFrameNumber++;
            // console.log(currentFrameNumber);
            updateStats();
            requestAnimationFrame(updateAndDraw);
        }

        function updateStats() {
            var fc = document.getElementById("frameCount");
            var rc = document.getElementById("rectangleCount");

            fc.innerText = "Frame Count: " + currentFrameNumber;
            rc.innerText = "Rectangle Count: " + sceneList.length;
        }

        class Rectangle {
            constructor(x, y, color, velocity) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.velocity = velocity;
            }

            draw() {
                const context = myCanvas.getContext("2d");

                context.fillStyle = this.color;
                context.strokeRect(this.x, this.y, 50, 50);
                context.fillRect(this.x, this.y, 50, 50);
            }
        }

    </script>
</body>

</html>